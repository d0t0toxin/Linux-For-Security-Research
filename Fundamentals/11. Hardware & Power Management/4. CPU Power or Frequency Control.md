***
**CPU Power / Frequency Control:** `cpupower`, `turbostat`
***
***
# CPUPower Command in Linux

The cpupower command in Linux is used to inspect and control CPU frequency scaling and power-saving settings. It provides the ability to view current CPU states, adjust frequency policies, and configure power management features.

## Installation

On most distributions, cpupower is available in the default repositories.

### On Debian/Ubuntu

```bash
sudo apt update
sudo apt install linux-tools-common linux-tools-generic linux-tools-$(uname -r)
```

### On Fedora/CentOS/RHEL

```bash
sudo dnf install kernel-tools
```

## Basic Usage

Check the version of cpupower

```bash
cpupower --version
```

## Display CPU Information

```bash
cpupower frequency-info
```

This command provides detailed information about CPU frequency, available governors, and current settings.

## Available Governors

Common CPU frequency governors:

- performance: Runs CPU at maximum frequency.
    
- powersave: Runs CPU at minimum frequency.
    
- ondemand: Dynamically adjusts frequency based on load.
    
- conservative: Gradually adjusts frequency based on load.
    
- schedutil: Uses kernel scheduler data to adjust frequency.
    

## Set CPU Governor

Set CPU governor to performance for all cores

```bash
sudo cpupower frequency-set -g performance
```

Set CPU governor to powersave for all cores

```bash
sudo cpupower frequency-set -g powersave
```

## Set Specific CPU Frequency

Set the maximum CPU frequency

```bash
sudo cpupower frequency-set -u 2.5GHz
```

Set the minimum CPU frequency

```bash
sudo cpupower frequency-set -d 1.2GHz
```

Set both minimum and maximum frequency

```bash
sudo cpupower frequency-set -d 1.2GHz -u 2.5GHz
```

## Monitor CPU Frequency

Continuously monitor CPU frequency

```bash
watch -n 1 cpupower frequency-info
```

## Display Available Frequencies

```bash
cpupower frequency-info --freq
```

## Set CPU Frequency for Specific Core

Set core 0 to performance governor

```bash
sudo cpupower -c 0 frequency-set -g performance
```

Set core 1 to 1.8 GHz

```bash
sudo cpupower -c 1 frequency-set -f 1.8GHz
```

## Reset CPU Frequency Settings

```bash
sudo cpupower frequency-set -r
```

Resets frequency limits and governor to default system settings.

## Check Current CPU Policy

```bash
cpupower frequency-info | grep 'current policy'
```

## Useful Flags

- \-c: Specify CPU core
    
- \-g: Set CPU governor
    
- \-f: Set specific frequency
    
- \-d: Set minimum frequency
    
- \-u: Set maximum frequency
    
- \-r: Reset to default
    
- \--help: Show help message
    

## Conclusion

cpupower is a powerful command-line tool to manage CPU performance and power efficiency. Proper usage can help in optimizing system performance or conserving power depending on the requirement.

* * *

* * *

# Tarbostat Command in Linux

The tarbostat command is used to display statistics about CPU turbo states and frequency scaling. It is part of tools for CPU performance monitoring and helps administrators and users understand how often CPUs are using turbo frequencies and other power-saving states.

## Installation

Tarbostat is not installed by default on most Linux distributions. It may be included in performance monitoring or CPU management packages, depending on your distribution.

### On Debian/Ubuntu

```bash
sudo apt update
sudo apt install linux-tools-common linux-tools-generic linux-tools-$(uname -r)
```

### On Fedora/CentOS/RHEL

```bash
sudo dnf install kernel-tools
```

## Basic Usage

Display turbo statistics for all CPU cores

```bash
tarbostat
```

Display turbo statistics for a specific CPU core, for example core 0

```bash
tarbostat -c 0
```

## Monitor CPU Turbo Frequency Continuously

```bash
watch -n 1 tarbostat
```

This command updates the turbo statistics every second.

## Example Output Explanation

Typical output columns may include:

- CPU: CPU core number
    
- MHz: Current CPU frequency
    
- Turbo Count: Number of times turbo was engaged
    
- P-States: Performance states available to the CPU
    
- C-States: Power-saving idle states of the CPU
    

## Display Specific Turbo Information

To show only CPUs that have turbo capability

```bash
tarbostat --turbo
```

## Logging to a File

```bash
tarbostat > turbo_log.txt
```

This saves the output to a file for later analysis.

## Useful Flags

- \-c: Specify CPU core
    
- \--turbo: Show only turbo-enabled CPUs
    
- \-i: Show CPU idle states information
    
- \-p: Show available performance states
    
- \--help: Display help message
    

## Practical Examples

Monitor turbo usage for core 0 continuously

```bash
watch -n 2 tarbostat -c 0
```

Save turbo statistics of all cores to a file for analysis

```bash
tarbostat --turbo > turbo_report.txt
```

## Conclusion

Tarbostat is a helpful tool to monitor CPU turbo usage and frequency states. It provides insights into how CPUs use turbo modes, which can help in performance tuning and power management.

* * *

* * *

