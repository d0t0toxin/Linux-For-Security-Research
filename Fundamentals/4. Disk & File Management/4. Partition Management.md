* * *

**Partition Management:** `fdisk`, `gdisk`, `parted`

* * *

* * *

# `fdisk` Command in Linux

`fdisk` is a command-line utility in Linux to **view, create, delete, or modify partitions** on a hard disk.

* * *

## 1\. What is `fdisk`?

- Works with **MBR (Master Boot Record)** disks.
    
- Installed with `util-linux` package.
    
- Requires **root privileges** (`sudo`) to modify disks.
    

* * *

## 2\. Checking disks before using `fdisk`

```bash
lsblk
sudo fdisk -l
```

**Example output:**

```
Disk /dev/sda: 500GB
Disk /dev/sdb: 1TB
```

* * *

## 3\. Basic Syntax

```bash
sudo fdisk [options] <device>
```

- `<device>`: Disk to operate on (e.g., `/dev/sda`).
    
- **Always use the whole disk**, not a partition like `/dev/sda1`.
    

* * *

## 4\. Common `fdisk` options

| Option | Description |
| --- | --- |
| `-l` | List all partitions on all disks |
| `-l <device>` | List partitions on a specific disk |
| `-u` | Change display units to sectors |
| `-c` | Enable/disable DOS compatibility mode |
| `-v` | Show version |
| `-s` | Display partition size in blocks |

* * *

## 5\. Interactive Mode

```bash
sudo fdisk /dev/sda
```

- Prompts:

```
Command (m for help):
```

**Key commands:**

| Command | Action |
| --- | --- |
| `m` | Show help menu |
| `p` | Print current partitions |
| `n` | Create a new partition |
| `d` | Delete a partition |
| `t` | Change partition type |
| `a` | Toggle bootable flag |
| `w` | Write changes and exit |
| `q` | Quit without saving |

* * *

## 6\. Creating a Partition Example

```bash
sudo fdisk /dev/sdb
```

Interactive steps:

1.  `n` → New partition
    
2.  `p` → Primary partition
    
3.  Partition number: `1`
    
4.  First sector: Press `Enter`
    
5.  Last sector: `+20G`
    

Optional:

- `t` → partition number → `82` (Linux swap)
    
- `a` → partition number
    
- `w` → write changes
    

* * *

## 7\. Deleting a Partition Example

```bash
sudo fdisk /dev/sdb
```

- `p` → list partitions
    
- `d` → delete partition → choose number
    
- `w` → write changes
    

* * *

## 8\. Viewing Partition Table

```bash
sudo fdisk -l /dev/sda
```

**Example output:**

```
Disk /dev/sda: 500GB
Device     Boot   Start      End    Sectors   Size Id Type
/dev/sda1  *      2048   1026047   1024000   500M 83 Linux
/dev/sda2       1026048 500117503 499091456 238G  8e Linux LVM
```

* * *

## 9\. Changing Partition Type

```bash
sudo fdisk /dev/sdb
```

- `t` → partition number → type code  
    **Common type codes:**
    
- `83` → Linux
    
- `82` → Linux swap
    
- `8e` → Linux LVM
    
- `7` → NTFS
    

* * *

## 10\. Rescanning Partitions

```bash
sudo partprobe
sudo kpartx -a /dev/sdb
```

* * *

## 11\. Tips and Warnings

1.  Always **backup important data**.
    
2.  `fdisk` works **only on whole disks**, not partitions.
    
3.  For **GPT disks**, use `gdisk`.
    
4.  After creating partitions, format them:
    

```bash
sudo mkfs.ext4 /dev/sdb1   # For Linux filesystem
sudo mkswap /dev/sdb2      # For swap
```

* * *

## 12\. Quick Practical Example

```bash
# List all disks
sudo fdisk -l

# Create a new 10GB partition on /dev/sdb
sudo fdisk /dev/sdb
# Interactive: n → p → 1 → Enter → +10G → w

# Format as ext4
sudo mkfs.ext4 /dev/sdb1

# Mount the partition
sudo mkdir /mnt/data
sudo mount /dev/sdb1 /mnt/data
```

* * *

* * *

# `gdisk` command in linux

## 1\. What is `gdisk`?

`gdisk` is a Linux command-line utility used to manage GPT (GUID Partition Table) disks.

- Works only with GPT disks (for MBR, use `fdisk`).
    
- Supports disks larger than 2TB.
    
- Allows creating, deleting, resizing, and converting partitions.
    
- Comes from the `gptfdisk` package.
    

**Check installation:**

```bash
gdisk --version
sudo apt install gdisk   # Debian/Ubuntu
sudo yum install gdisk   # RHEL/CentOS
```

* * *

## 2\. Checking disks

```bash
lsblk
sudo gdisk -l /dev/sda
```

* * *

## 3\. Basic Syntax

```bash
sudo gdisk [options] <device>
```

- `<device>`: disk to operate on, e.g., `/dev/sda`
    
- Always target the **whole disk**.
    

* * *

## 4\. Common `gdisk` Options

| Option | Description |
| --- | --- |
| `-l <device>` | List partitions |
| `-v` | Show version |
| `-i <n>` | Show info about partition n |
| `-t <n>:<hex>` | Change partition type |
| `-n` | Create a new partition |
| `-d <n>` | Delete partition n |
| `-p` | Print partition table |
| `-c <n>:<name>` | Change partition name |
| `-w` | Write changes |
| `-q` | Quit without saving |
| `-b <file>` | Backup partition table |
| `-l <file>` | Load table from backup |

* * *

## 5\. Interactive Mode

```bash
sudo gdisk /dev/sda
```

**Prompt:**

```
Command (? for help):
```

**Key interactive commands:**

| Command | Action |
| --- | --- |
| `?` | Show help menu |
| `p` | Print partition table |
| `n` | Create a new partition |
| `d` | Delete a partition |
| `t` | Change partition type |
| `c` | Change partition name |
| `a` | Toggle partition attributes |
| `x` | Extra functionality (advanced) |
| `w` | Write changes |
| `q` | Quit without saving |

* * *

## 6\. Partition Types

| Type | Code | Use |
| --- | --- | --- |
| Linux filesystem | 8300 | Linux ext4, xfs, etc. |
| Linux swap | 8200 | Swap |
| EFI System | ef00 | EFI boot |
| Linux LVM | 8e00 | LVM volumes |
| Microsoft Basic Data | 0700 | Windows partitions |

**Change type interactively:** `t` → partition number → type code  
**Change name:** `c` → partition number → name

* * *

## 7\. Creating a Partition Example

```bash
sudo gdisk /dev/sdb
```

Interactive steps:

1.  `n` → New partition
    
2.  Partition number: `1`
    
3.  First sector: `Enter` (default)
    
4.  Last sector: `+20G`
    
5.  Type code: `8300` (Linux filesystem)
    
6.  Name: `Data`
    
7.  `p` → verify
    
8.  `w` → write changes
    

* * *

## 8\. Deleting a Partition

```bash
sudo gdisk /dev/sdb
```

- `p` → list partitions
    
- `d` → partition number
    
- `p` → verify
    
- `w` → write changes
    

* * *

## 9\. Converting MBR to GPT

```bash
sudo gdisk /dev/sdb
```

- Prompts: “Convert MBR to GPT?”
    
- `w` → write GPT table
    

> Backup data first.

* * *

## 10\. Extra Features

- `x` → Expert menu
    
    - `b` → Backup GPT table
        
    - `l` → Load GPT table
        
    - `c` → Change partition GUID
        

* * *

## 11\. Formatting Partitions

```bash
sudo mkfs.ext4 /dev/sdb1   # Linux filesystem
sudo mkswap /dev/sdb2      # Swap
```

* * *

## 12\. Example Workflow

```bash
# List all partitions
sudo gdisk -l /dev/sdb

# Create new partition
sudo gdisk /dev/sdb
# n → 1 → Enter → +10G → 8300 → Data → w

# Format partition
sudo mkfs.ext4 /dev/sdb1

# Mount it
sudo mkdir /mnt/data
sudo mount /dev/sdb1 /mnt/data

# Verify
lsblk
df -h
```

* * *

## 13\. Tips and Warnings

1.  Always **backup** before modifying partitions.
    
2.  GPT disks are safer for large disks (>2TB).
    
3.  gdisk can **recover GPT tables** if corrupted.
    
4.  EFI boot requires a **small EFI partition** (type `ef00`, usually 512MB).
    
5.  After creating partitions, **update fstab** for auto-mounting.
    

* * *

* * *

# `parted` Command in Linux

* * *

## 1\. What is `parted`?

`parted` is a Linux command-line utility used to:

- Create, delete, resize, and manage disk partitions.
    
- Work with both MBR and GPT partition tables.
    
- Resize partitions without losing data (with care).
    
- Support large disks (>2TB).
    

**Check installation:**

```bash
parted --version
```

Install if missing:

```bash
sudo apt install parted   # Debian/Ubuntu
sudo yum install parted   # RHEL/CentOS
```

* * *

## 2\. Basic Syntax

```bash
sudo parted [options] <device> [command [arguments]]
```

- `<device>` = Disk you want to work on (e.g., `/dev/sda`)
    
- `command` = operation like `mklabel`, `mkpart`, etc.
    

Interactive mode:

```bash
sudo parted /dev/sda
```

* * *

## 3\. Checking Disks

```bash
sudo parted /dev/sda print
```

or

```bash
lsblk
```

Example output:

```
Model: ATA ST500LM012 (scsi)
Disk /dev/sda: 500GB
Sector size (logical/physical): 512B/4096B
Partition Table: gpt
Disk Flags:
```

* * *

## 4\. Partition Table Types

- **MBR (`msdos`)** – max 2TB, 4 primary partitions
    
- **GPT (`gpt`)** – modern, supports large disks, EFI boot, >4 partitions
    

Create partition table:

```bash
sudo parted /dev/sda mklabel gpt    # GPT
sudo parted /dev/sdb mklabel msdos  # MBR
```

* * *

## 5\. Units in `parted`

Specify sizes in:

- MB, GB, TB, s (sectors)

Set global units:

```bash
sudo parted /dev/sda unit GB
```

* * *

## 6\. Creating Partitions

```bash
sudo parted /dev/sda mkpart <name> <type> <start> <end>
```

- `<name>` = optional
    
- `<type>` = `primary`, `logical`, or `extended`
    
- `<start>` & `<end>` = in chosen unit
    

Example: 20GB Linux partition

```bash
sudo parted /dev/sda mkpart primary ext4 1GB 21GB
```

* * *

## 7\. Viewing Partitions

```bash
sudo parted /dev/sda print
```

Example output:

```
Number  Start  End    Size   File system  Name  Flags
 1      1GB    21GB   20GB   ext4         Data
 2      21GB   25GB   4GB    linux-swap   Swap
```

* * *

## 8\. Deleting a Partition

```bash
sudo parted /dev/sda rm <partition_number>
```

Example: Delete partition 2

```bash
sudo parted /dev/sda rm 2
```

* * *

## 9\. Resizing a Partition

```bash
sudo parted /dev/sda resizepart <partition_number> <end>
```

Example: Resize partition 1 to 30GB

```bash
sudo parted /dev/sda resizepart 1 30GB
```

> Note: Resize filesystem after changing partition boundary:

```bash
sudo resize2fs /dev/sda1  # for ext4
```

* * *

## 10\. Setting Partition Flags

```bash
sudo parted /dev/sda set <partition_number> <flag> on
```

Common flags:

| Flag | Use |
| --- | --- |
| boot | Bootable partition |
| esp | EFI system partition |
| lvm | Linux LVM |
| raid | RAID partition |

Example: Make partition 1 bootable

```bash
sudo parted /dev/sda set 1 boot on
```

* * *

## 11\. Interactive Mode

```bash
sudo parted /dev/sda
```

Commands:

```
(parted) print       # show partitions
(parted) mklabel gpt # create GPT table
(parted) mkpart primary ext4 1GB 21GB
(parted) set 1 boot on
(parted) quit        # save and exit
```

* * *

## 12\. Formatting Partitions

```bash
sudo mkfs.ext4 /dev/sda1   # Linux filesystem
sudo mkswap /dev/sda2      # Swap
```

* * *

## 13\. Example Workflow

```bash
# 1. View current partitions
sudo parted /dev/sdb print

# 2. Create GPT table
sudo parted /dev/sdb mklabel gpt

# 3. Set units to GB
sudo parted /dev/sdb unit GB

# 4. Create Linux partition (20GB)
sudo parted /dev/sdb mkpart primary ext4 1GB 21GB

# 5. Create swap partition (4GB)
sudo parted /dev/sdb mkpart primary linux-swap 21GB 25GB

# 6. Make first partition bootable
sudo parted /dev/sdb set 1 boot on

# 7. Format partitions
sudo mkfs.ext4 /dev/sdb1
sudo mkswap /dev/sdb2

# 8. Mount partition
sudo mkdir /mnt/data
sudo mount /dev/sdb1 /mnt/data
```

* * *

## 14\. Tips and Warnings

1.  Always backup important data before changing partitions.
    
2.  Supports both MBR and GPT—ideal for large disks.
    
3.  Can safely resize partitions, unlike fdisk.
    
4.  Use `unit GB` to avoid mistakes.
    
5.  Use `print` often to verify changes.
    

* * *

* * *

&nbsp;
